{"id":"node_modules/@eva-design/processor/js/src/processor/meta/metaProcessor.js","dependencies":[{"name":"/Users/rheinze/Code/uikitten-popover-repro/node_modules/@eva-design/processor/js/src/processor/meta/metaProcessor.js.map","includedInParent":true,"mtime":1606174345788},{"name":"/Users/rheinze/Code/uikitten-popover-repro/package.json","includedInParent":true,"mtime":1609961906808},{"name":"/Users/rheinze/Code/uikitten-popover-repro/node_modules/@eva-design/processor/package.json","includedInParent":true,"mtime":1606174345788},{"name":"../../service","loc":{"line":3,"column":26},"parent":"/Users/rheinze/Code/uikitten-popover-repro/node_modules/@eva-design/processor/js/src/processor/meta/metaProcessor.js","resolved":"/Users/rheinze/Code/uikitten-popover-repro/node_modules/@eva-design/processor/js/src/service/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst service_1 = require(\"../../service\");\nclass MetaProcessor {\n    process(params) {\n        const { mapping, meta, theme } = params;\n        const strictTheme = this.processStrictTheme(theme || {});\n        const entries = meta.reduce((acc, controlMeta) => {\n            const { name, appearance, variants, states } = controlMeta;\n            const nextAppearanceEntries = service_1.createAllStyles(mapping, name, appearance, variants, states, strictTheme);\n            const prevAppearanceStyles = acc[name];\n            const nextAppearanceStyles = service_1.toObject(nextAppearanceEntries);\n            return Object.assign(Object.assign({}, acc), { [name]: Object.assign(Object.assign({}, prevAppearanceStyles), nextAppearanceStyles) });\n        }, {});\n        return this.withControlMeta(mapping, entries);\n    }\n    processStrictTheme(theme) {\n        return Object.keys(theme).reduce((acc, key) => {\n            return Object.assign(Object.assign({}, acc), { [key]: this.getStrictThemeValue(key, theme, key) });\n        }, {});\n    }\n    getStrictThemeValue(name, theme, fallback) {\n        if (this.isReference(name)) {\n            const themeKey = this.createKeyFromReference(name);\n            return this.findValue(themeKey, theme) || fallback;\n        }\n        return this.findValue(name, theme) || fallback;\n    }\n    findValue(name, theme) {\n        const value = theme[name];\n        if (this.isReference(value)) {\n            const themeKey = this.createKeyFromReference(value);\n            return this.findValue(themeKey, theme);\n        }\n        return value;\n    }\n    isReference(value) {\n        return `${value}`.startsWith('$');\n    }\n    createKeyFromReference(value) {\n        return `${value}`.substring(1);\n    }\n    withControlMeta(mapping, style) {\n        return Object.keys(style).reduce((acc, control) => {\n            const controlEntry = {\n                meta: mapping[control].meta,\n                styles: style[control],\n            };\n            return Object.assign(Object.assign({}, acc), { [control]: controlEntry });\n        }, {});\n    }\n}\nexports.MetaProcessor = MetaProcessor;\n"},"sourceMaps":{"js":{"version":3,"file":"metaProcessor.js","sourceRoot":"","sources":["../../../../../../packages/processor/js/src/processor/meta/metaProcessor.ts"],"names":[],"mappings":";;AASA,2CAGuB;AAcvB,MAAa,aAAa;IAEjB,OAAO,CAAC,MAAkC;QAC/C,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,CAAC;QAExC,MAAM,WAAW,GAAoB,IAAI,CAAC,kBAAkB,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;QAE1E,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAmB,EAAE,WAA4B,EAAE,EAAE;YAChF,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,WAAW,CAAC;YAE3D,MAAM,qBAAqB,GAAG,yBAAe,CAAC,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,CAAC,CAAC;YACxG,MAAM,oBAAoB,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;YACvC,MAAM,oBAAoB,GAAG,kBAAQ,CAAC,qBAAqB,CAAC,CAAC;YAE7D,uCAAY,GAAG,KAAE,CAAC,IAAI,CAAC,kCAAO,oBAAoB,GAAK,oBAAoB,KAAK;QAClF,CAAC,EAAE,EAAE,CAAC,CAAC;QAEP,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAChD,CAAC;IAEO,kBAAkB,CAAC,KAAkB;QAC3C,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,GAAoB,EAAE,GAAW,EAAmB,EAAE;YACtF,uCAAY,GAAG,KAAE,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,CAAC,IAAG;QACtE,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;IAEO,mBAAmB,CAAC,IAAY,EAAE,KAAkB,EAAE,QAAc;QAE1E,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;YAC1B,MAAM,QAAQ,GAAW,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;YAC3D,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,CAAC,IAAI,QAAQ,CAAC;SACpD;QAED,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,QAAQ,CAAC;IACjD,CAAC;IAEO,SAAS,CAAC,IAAY,EAAE,KAAkB;QAChD,MAAM,KAAK,GAAQ,KAAK,CAAC,IAAI,CAAC,CAAC;QAE/B,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE;YAC3B,MAAM,QAAQ,GAAW,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;YAC5D,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;SACxC;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAEO,WAAW,CAAC,KAAa;QAC/B,OAAO,GAAG,KAAK,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IACpC,CAAC;IAEO,sBAAsB,CAAC,KAAa;QAC1C,OAAO,GAAG,KAAK,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IAEO,eAAe,CAAC,OAAyB,EAAE,KAA2B;QAC5E,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,GAAmB,EAAE,OAAe,EAAE,EAAE;YACxE,MAAM,YAAY,GAA2B;gBAC3C,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI;gBAC3B,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC;aACvB,CAAC;YAEF,uCAAY,GAAG,KAAE,CAAC,OAAO,CAAC,EAAE,YAAY,IAAG;QAC7C,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;CACF;AAjED,sCAiEC","sourcesContent":[null]}},"error":null,"hash":"98c8996298197bc9e7920390d03e90a2","cacheData":{"env":{}}}